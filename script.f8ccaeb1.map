{"version":3,"sources":["src/script.js"],"names":["VERTICAL_TYPE","VERTICAL_ITEM_CLSNAME","USECASE_TYPE","USECASE_ITEM_CLSNAME","VERTICAL_LIST","text","value","USECASE_LIST","Item","type","VerticalItem","call","UseCaseItem","Filter","verticals","usecases","prototype","getSelectedTagIds","ids","map","vertical","join","getFilterItems","itemType","add","txt","val","newItem","push","removeAll","remove","items","newItems","filter","i","$widgetId","$filterId","$filter","initialize","$","attr","find","html","createSideBarList","sideBarHtml","getSectionHtml","append","title","list","clsName","section","each","idx","elem","createEachItem","sideBarItemChange","e","target","parent","innerText","is","addClass","removeClass","isSidebarAnyChecked","changeWidgetFilter","filterId","keyword","tagIds","StacklaFluidWidget","search","changeFilter","searchWidgetByKeyword","checked","sortByClick","parents","sideBarVerticalChange","sideBarUsecaseChange","document","ready","on","keydown","keyCode","hasClass"],"mappings":";AAAA,IAAMA,EAAgB,WAChBC,EAAwB,eACxBC,EAAe,UACfC,EAAuB,cAEvBC,EAAgB,CACpB,CAACC,KAAK,SAAUC,MAAM,UACtB,CAACD,KAAK,kBAAmBC,MAAM,UAC/B,CAACD,KAAK,aAAcC,MAAM,UAC1B,CAACD,KAAK,YAAaC,MAAM,UACzB,CAACD,KAAK,MAAOC,MAAM,UACnB,CAACD,KAAK,aAAcC,MAAM,UAC1B,CAACD,KAAK,YAAaC,MAAM,UACzB,CAACD,KAAK,QAASC,MAAM,WAEjBC,EAAe,CACnB,CAACF,KAAK,SAAUC,MAAM,UACtB,CAACD,KAAK,eAAgBC,MAAM,UAC5B,CAACD,KAAK,QAASC,MAAM,UACrB,CAACD,KAAK,cAAeC,MAAM,UAC3B,CAACD,KAAK,WAAYC,MAAM,UACxB,CAACD,KAAK,cAAeC,MAAM,UAC3B,CAACD,KAAK,YAAaC,MAAM,UACzB,CAACD,KAAK,SAAUC,MAAM,WAIpBE,EAAO,SAASH,EAAKC,EAAMG,GACxBJ,KAAAA,KAAOA,EACPC,KAAAA,MAAQA,EACRG,KAAAA,KAAOA,GAGVC,EAAe,SAASL,EAAKC,GAC/BE,EAAKG,KAAK,KAAKN,EAAKC,EAAMN,IAExBY,EAAc,SAASP,EAAKC,GAC9BE,EAAKG,KAAK,KAAKN,EAAKC,EAAMJ,IAGxBW,EAAS,WACNC,KAAAA,UAAY,GACZC,KAAAA,SAAW,IAGlBF,EAAOG,UAAUC,kBAAoB,WAC/BC,IAAAA,EAAM,KAAKJ,UAAUK,IAAI,SAACC,GACrBA,OAAAA,EAASd,QACfe,KAAK,KAODH,OALPA,EAAe,KAARA,EAAcA,GAAM,IAAMA,EAEjCA,GAAO,KAAKH,SAASI,IAAI,SAACJ,GACjBA,OAAAA,EAAST,QACfe,KAAK,MAIVR,EAAOG,UAAUM,eAAiB,SAASC,GACjCA,OAAAA,IAAavB,EAAiB,KAAKc,UAAaS,IAAarB,EAAgB,KAAKa,SAAW,MAGvGF,EAAOG,UAAUQ,IAAM,SAASC,EAAIC,EAAIjB,GAClCkB,IAAAA,EACDlB,IAAST,GACV2B,EAAU,IAAIjB,EAAae,EAAIC,GAC1BZ,KAAAA,UAAUc,KAAKD,IAEdlB,IAASP,IACfyB,EAAU,IAAIf,EAAYa,EAAIC,GACzBX,KAAAA,SAASa,KAAKD,KAGvBd,EAAOG,UAAUa,UAAY,WACtBf,KAAAA,UAAY,GACZC,KAAAA,SAAW,IAElBF,EAAOG,UAAUc,OAAS,SAASJ,EAAIjB,GACjCsB,IACAC,EADQ,KAAKV,eAAeb,GACXwB,OAAO,SAACC,GACpBA,OAAAA,EAAE5B,OAASoB,IAGjBjB,IAAST,EAAe,KAAKc,UAAYkB,EACpCvB,IAASP,IAAc,KAAKa,SAAWiB,IA4BjD,IACIG,EAAUC,EADVC,EAAU,IAAIxB,EAyBlB,SAASyB,IACFH,KAAAA,UAAYI,EAAE,mBAAmBC,KAAK,WACtCJ,KAAAA,UAAYG,EAAE,mBAAmBC,KAAK,eAC3CD,EAAE,aAAaE,KAAK,cAAcC,KAAK,UAEvCC,IAIF,SAASA,IACHC,IAAAA,EAAcC,EAAe,WAAWzC,EAAc,sBAC1DwC,GAAeC,EAAe,WAAWtC,EAAa,qBACtDgC,EAAE,8BAA8BO,OAAOF,GAGzC,SAASC,EAAeE,EAAMC,EAAKC,GAC7BC,IAAAA,EAAS,WAAaH,EAAQ,YAI3BG,OAHPX,EAAEY,KAAKH,EAAM,SAASI,EAAIC,GACxBH,GAAWI,EAAeL,EAAQI,EAAK/C,MAAM+C,EAAKhD,QAE7C6C,EAGT,SAASI,EAAeL,EAAQvB,EAAID,GAC+BwB,MAAAA,0DAAAA,OAAAA,EAAoBvB,cAAAA,OAAAA,EAASD,OAAAA,OAAAA,EAA9F,YA8BF,SAAS8B,EAAkBC,EAAE/C,GACvBiB,IAAAA,EAAM8B,EAAEC,OAAOnD,MACfmB,EAAMc,EAAEiB,EAAEC,QAAQC,SAAS,GAAGC,UAE/BpB,EAAEiB,EAAEC,QAAQG,GAAG,aAChBrB,EAAEiB,EAAEC,QAAQC,SAASG,SAAS,WAC9BxB,EAAQb,IAAIC,EAAIC,EAAIjB,KAEpB8B,EAAEiB,EAAEC,QAAQC,SAASI,YAAY,WACjCzB,EAAQP,OAAOJ,EAAIjB,IAGlB,KAAKsD,sBACNxB,EAAE,cAAc,GAAGjC,MAAQ,IAI7B0D,EAAmB,KAAK5B,WAG1B,SAAS4B,EAAmBC,GAASC,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACzCC,EAAS9B,EAAQpB,oBACrBgD,EAAaA,GAAY,KAAK7B,UAC9BgC,mBAAmBC,OAAO,KAAKlC,UAAW+B,GAC1CE,mBAAmBE,aAAa,KAAKnC,UAAU8B,EAAUE,GAG3D,SAASI,EAAsBL,GAC7B3B,EAAEY,KAAKZ,EAAE,2BAA4B,SAASa,EAAIC,GAChDd,EAAEc,GAAMK,SAASI,YAAY,WAC7BT,EAAKmB,SAAU,IAGjBnC,EAAQR,YACRmC,EAAmB,KAAK5B,UAAU8B,GAGpC,SAASO,EAAYjB,GACfS,IAAAA,EAAWT,EAAEhB,KAAK,eACtBgB,EAAEkB,QAAQ,aAAajC,KAAK,cAAcC,KAAKc,EAAEnD,QACjD2D,EAAmBC,GAGrB,SAASU,EAAsBnB,GAC7BD,EAAkBC,EAAExD,GAEtB,SAAS4E,EAAqBpB,GAC5BD,EAAkBC,EAAEtD,GAGtB,SAAS6D,IAIA,OAHPxB,EAAEY,KAAKZ,EAAE,2BAA4B,SAASa,EAAIC,GAC7CA,GAAAA,EAAKmB,QAAS,OAAO,KAEnB,EAlITjC,EAAEsC,UAAUC,MAAM,WAChBxC,IAEAC,EAAE,aAAawC,GAAG,QAAS,SAACvB,GAC1BiB,EAAYlC,EAAEiB,EAAEC,WAElBlB,EAAE,cAAcyC,QAAQ,SAASxB,GACd,IAAdA,EAAEyB,SAA+B,KAAdzB,EAAEyB,SAExBV,EADUhC,EAAE,MAAM,GAAGjC,SAIvBiC,EAAE,YAAYwC,GAAG,SAAU,0CAA2C,SAACvB,GAClEjB,EAAEiB,EAAEC,QAAQyB,SAAS,sBACtBP,EAAsBnB,GAEhBjB,EAAEiB,EAAEC,QAAQyB,SAAS,sBAC3BN,EAAqBpB","file":"script.f8ccaeb1.map","sourceRoot":"..","sourcesContent":["const VERTICAL_TYPE = \"Vertical\";\nconst VERTICAL_ITEM_CLSNAME = \"verticalItem\";\nconst USECASE_TYPE = \"UseCase\";\nconst USECASE_ITEM_CLSNAME = \"usecaseItem\";\n\nconst VERTICAL_LIST = [\n  {text:\"Travel\", value:\"372495\"},\n  {text:\"Food & Beverage\", value:\"372494\"},\n  {text:\"Automotive\", value:\"373547\"},\n  {text:\"Education\", value:\"373546\"},\n  {text:\"CPG\", value:\"373548\"},\n  {text:\"Government\", value:\"373549\"},\n  {text:\"Nonprofit\", value:\"373550\"},\n  {text:\"Other\", value:\"373551\"}\n];\nconst USECASE_LIST = [\n  {text:\"Widget\", value:\"372869\"},\n  {text:\"Event Screen\", value:\"372870\"},\n  {text:\"Email\", value:\"372871\"},\n  {text:\"Advertising\", value:\"373553\"},\n  {text:\"Commerce\", value:\"373554\"},\n  {text:\"Competition\", value:\"373555\"},\n  {text:\"GoConnect\", value:\"373556\"},\n  {text:\"Rights\", value:\"373557\"}\n];\n\n// Item class \nvar Item = function(text,value,type){\n  this.text = text;\n  this.value = value;\n  this.type = type;\n}\n\nvar VerticalItem = function(text,value) {\n  Item.call(this,text,value,VERTICAL_TYPE); \n}\nvar UseCaseItem = function(text,value){\n  Item.call(this,text,value,USECASE_TYPE);\n}\n\nvar Filter = function(){\n  this.verticals = [];\n  this.usecases = [];\n};\n\nFilter.prototype.getSelectedTagIds = function(){\n  var ids = this.verticals.map((vertical) => {\n    return vertical.value;\n  }).join(',');\n\n  ids = (ids !== \"\") ? ids+= \",\" : ids; \n\n  ids += this.usecases.map((usecases) => {\n    return usecases.value;\n  }).join(',');\n  return ids;\n};\n\nFilter.prototype.getFilterItems = function(itemType){\n  return (itemType === VERTICAL_TYPE) ? this.verticals : (itemType === USECASE_TYPE) ? this.usecases : null;\n};\n\nFilter.prototype.add = function(txt,val,type){\n  var newItem;\n  if(type === VERTICAL_TYPE){\n    newItem = new VerticalItem(txt,val);\n    this.verticals.push(newItem);\n  }\n  else if(type === USECASE_TYPE){\n    newItem = new UseCaseItem(txt,val);\n    this.usecases.push(newItem);\n  }\n};\nFilter.prototype.removeAll = function(){\n  this.verticals = [];\n  this.usecases = [];\n}\nFilter.prototype.remove = function(val,type){\n  var items = this.getFilterItems(type);\n  var newItems = items.filter((i) => {\n    return i.value != val;      \n  });\n\n  if(type === VERTICAL_TYPE) this.verticals = newItems;\n  else if(type === USECASE_TYPE) this.usecases = newItems;\n}\n\n//\n// not now but don't delete for future sake\n//\n\n// Filter.prototype.createItemHtml = function(){\n//   if(!this.verticals.length && !this.usecases.length)\n//     return \"<div class='itemBlank'>Search...</div>\";\n\n//   var itemHtmls = \"\";\n//   $.each(this.verticals,function(index,elem){\n//     itemHtmls += `<div class='item ${VERTICAL_ITEM_CLSNAME}' onclick='filteredItemClick(this)' data-value='${elem.value}'>${elem.text}</div>`;\n//   });\n//   $.each(this.usecases,function(index,elem){\n//     itemHtmls += `<div class='item ${USECASE_ITEM_CLSNAME}' onclick='filteredItemClick(this)' data-value='${elem.value}'>${elem.text}</div>`;\n//   });\n\n//   return itemHtmls;\n// }\n\n// Filter.prototype.showList = function(){\n//   $(\"#conditions\").empty();\n//   $(\"#conditions\").append(this.createItemHtml());\n// };\n\n// main code\nvar $filter = new Filter();\nvar $widgetId,$filterId;\n\n$(document).ready(function(){\n  initialize();\n\n  $('.sortBy a').on('click', (e) =>{\n    sortByClick($(e.target));\n  });\n  $('#txtSearch').keydown(function(e){\n    if(e.keyCode === 9 || e.keyCode === 16) return;\n    var txt = $(this)[0].value;\n    searchWidgetByKeyword(txt);\n  });\n\n  $('#sidebar').on('change', '.searchVerticalItem, .searchUseCaseItem', (e) => {\n    if($(e.target).hasClass(\"searchVerticalItem\")){\n      sideBarVerticalChange(e);\n    }\n    else if($(e.target).hasClass(\"searchUseCaseItem\")){\n      sideBarUsecaseChange(e);\n    }\n  });\n});\n\nfunction initialize(){\n  this.$widgetId = $(\".stackla-widget\").attr(\"data-id\");\n  this.$filterId = $(\".stackla-widget\").attr(\"data-filter\");\n  $(\".dropdown\").find('.lblButton').html(\"Latest\");\n\n  createSideBarList();\n  //$filter.showList();\n}\n\nfunction createSideBarList(){\n  var sideBarHtml = getSectionHtml(\"Vertical\",VERTICAL_LIST,\"searchVerticalItem\");\n  sideBarHtml += getSectionHtml(\"Use Case\",USECASE_LIST,\"searchUseCaseItem\");\n  $('.sidebar_fieldset fieldset').append(sideBarHtml);\n}\n\nfunction getSectionHtml(title,list,clsName){\n  var section= \"<legend>\" + title + \"</legend>\";\n  $.each(list, function(idx,elem){\n    section += createEachItem(clsName,elem.value,elem.text);\n  });\n  return section;\n}\n\nfunction createEachItem(clsName,val,txt){\n  return `<label class=\"check_css\"><input type=\"checkbox\" class=\"${clsName}\" value =\"${val}\" >${txt}</label>`;\n}\n\n//\n// not now but don't delete for future sake\n//\n\n// function filteredItemClick(e){\n//   var val = $(e).data('value');\n//   var type, elems;\n\n//   if($(e).hasClass(VERTICAL_ITEM_CLSNAME)){\n//     type = VERTICAL_TYPE;\n//     elems = $(\".searchVerticalItem\");\n//   }\n//   else if($(e).hasClass(USECASE_ITEM_CLSNAME)){\n//     elems = $(\".searchUseCaseItem\");\n//     type = USECASE_TYPE;\n//   }\n\n//   $filter.remove(val,type);\n\n//   $.each(elems, function(idx,elem){\n//     if(elem.value == val) elem.checked = !elem.checked;\n//   })\n\n//   $filter.showList();\n//   this.changeWidgetFilter();\n// }\n\nfunction sideBarItemChange(e,type){\n  var val = e.target.value;\n  var txt = $(e.target).parent()[0].innerText;\n\n  if($(e.target).is(':checked')){\n    $(e.target).parent().addClass('checked');\n    $filter.add(txt,val,type);\n  }else{\n    $(e.target).parent().removeClass('checked');\n    $filter.remove(val,type); \n  }\n\n  if(this.isSidebarAnyChecked){\n    $(\"#txtSearch\")[0].value = \"\";\n  }\n\n  //$filter.showList();\n  changeWidgetFilter(this.$filterId);\n}\n\nfunction changeWidgetFilter(filterId,keyword = \"\"){\n  var tagIds = $filter.getSelectedTagIds();\n  filterId = (!filterId) ? this.$filterId : filterId;\n  StacklaFluidWidget.search(this.$widgetId, keyword)\n  StacklaFluidWidget.changeFilter(this.$widgetId,filterId, tagIds);\n}\n\nfunction searchWidgetByKeyword(keyword){\n  $.each($(\".sidebar_fieldset input\"), function(idx,elem){\n    $(elem).parent().removeClass('checked');\n    elem.checked = false;\n  })\n\n  $filter.removeAll();\n  changeWidgetFilter(this.$filterId,keyword);\n}\n\nfunction sortByClick(e){\n  var filterId = e.attr(\"data-filter\");\n  e.parents(\".dropdown\").find('.lblButton').html(e.text());\n  changeWidgetFilter(filterId);\n}\n\nfunction sideBarVerticalChange(e){\n  sideBarItemChange(e,VERTICAL_TYPE);\n}\nfunction sideBarUsecaseChange(e){\n  sideBarItemChange(e,USECASE_TYPE);\n}\n\nfunction isSidebarAnyChecked(){\n  $.each($(\".sidebar_fieldset input\"), function(idx,elem){\n    if(elem.checked) return true;\n  })\n  return false;\n}"]}